var Mailcheck={domainThreshold:4,topLevelThreshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com","icloud.com"],defaultTopLevelDomains:["co.jp","co.uk","com","net","org","info","edu","gov","mil","ca"],run:function(c){c.domains=c.domains||Mailcheck.defaultDomains;c.topLevelDomains=c.topLevelDomains||Mailcheck.defaultTopLevelDomains;c.distanceFunction=c.distanceFunction||Mailcheck.sift3Distance;var e=function(f){return f};var b=c.suggested||e;var d=c.empty||e;var a=Mailcheck.suggest(Mailcheck.encodeEmail(c.email),c.domains,c.topLevelDomains,c.distanceFunction);return a?b(a):d()},suggest:function(f,c,g,e){f=f.toLowerCase();var b=this.splitEmail(f);var d=this.findClosestDomain(b.domain,c,e,this.domainThreshold);if(d){if(d!=b.domain){return{address:b.address,domain:d,full:b.address+"@"+d}}}else{var a=this.findClosestDomain(b.topLevelDomain,g,e,this.topLevelThreshold);if(b.domain&&a&&a!=b.topLevelDomain){var h=b.domain;d=h.substring(0,h.lastIndexOf(b.topLevelDomain))+a;return{address:b.address,domain:d,full:b.address+"@"+d}}}return false},findClosestDomain:function(g,b,d,a){a=a||this.topLevelThreshold;var h;var e=99;var c=null;if(!g||!b){return false}if(!d){d=this.sift3Distance}for(var f=0;f<b.length;f++){if(g===b[f]){return g}h=d(g,b[f]);if(h<e){e=h;c=b[f]}}if(e<=a&&c!==null){return c}else{return false}},sift3Distance:function(f,b){if(f==null||f.length===0){if(b==null||b.length===0){return 0}else{return b.length}}if(b==null||b.length===0){return f.length}var j=0;var h=0;var g=0;var a=0;var e=5;while((j+h<f.length)&&(j+g<b.length)){if(f.charAt(j+h)==b.charAt(j+g)){a++}else{h=0;g=0;for(var d=0;d<e;d++){if((j+d<f.length)&&(f.charAt(j+d)==b.charAt(j))){h=d;break}if((j+d<b.length)&&(f.charAt(j)==b.charAt(j+d))){g=d;break}}}j++}return(f.length+b.length)/2-a},splitEmail:function(b){var e=b.trim().split("@");if(e.length<2){return false}for(var c=0;c<e.length;c++){if(e[c]===""){return false}}var d=e.pop();var f=d.split(".");var a="";if(f.length==0){return false}else{if(f.length==1){a=f[0]}else{for(var c=1;c<f.length;c++){a+=f[c]+"."}if(f.length>=2){a=a.substring(0,a.length-1)}}}return{topLevelDomain:a,domain:d,address:e.join("@")}},encodeEmail:function(b){var a=encodeURI(b);a=a.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}");return a}};if(typeof module!=="undefined"&&module.exports){module.exports=Mailcheck}if(typeof window!=="undefined"&&window.jQuery){(function(a){a.fn.mailcheck=function(e){var b=this;if(e.suggested){var d=e.suggested;e.suggested=function(f){d(b,f)}}if(e.empty){var c=e.empty;e.empty=function(){c.call(null,b)}}e.email=this.val();Mailcheck.run(e)}})(jQuery)};